generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model carrinho {
  user_id    Int
  produto_id Int
  quantidade Int
  produto    produto @relation(fields: [produto_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_has_produto_produto1")
  user       user    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user_has_produto_user1")

  @@id([user_id, produto_id])
  @@index([user_id], map: "fk_cliente_has_produto_cliente1_idx")
  @@index([produto_id], map: "fk_cliente_has_produto_produto1_idx")
}

model comentario {
  id         Int     @id @default(autoincrement())
  texto      String? @db.VarChar(225)
  user_id    Int
  produto_id Int
  estrela    Int
  produto    produto @relation(fields: [produto_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_comentario_produto1")
  user       user    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_comentario_user1")

  @@index([produto_id], map: "fk_comentario_produto1_idx")
  @@index([user_id], map: "fk_comentario_cliente1_idx")
}

model endereco {
  id          Int     @id @default(autoincrement())
  nome        String  @db.VarChar(45)
  estado      String  @db.VarChar(2)
  cidade      String  @db.VarChar(45)
  bairro      String  @db.VarChar(45)
  rua         String  @db.VarChar(45)
  numero      Int
  complemento String? @db.VarChar(45)
  cep         String  @db.VarChar(8)
  user_id     Int
  user        user    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_endereco_user1")

  @@index([user_id], map: "fk_endereco_cliente1_idx")
}

model favorito {
  user_id    Int
  produto_id Int
  produto    produto @relation(fields: [produto_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user_has_produto_produto3")
  user       user    @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user_has_produto_user3")

  @@id([produto_id, user_id])
  @@index([user_id], map: "fk_produto_has_cliente_cliente1_idx")
  @@index([produto_id], map: "fk_produto_has_cliente_produto1_idx")
}

model produto {
  id            Int          @id @default(autoincrement())
  nome          String       @db.VarChar(45)
  descricao     String       @db.LongText
  categoria     String       @db.VarChar(45)
  valor         Int
  valordesconto Int?
  capa          String?      @db.VarChar(255)
  carrinho      carrinho[]
  comentario    comentario[]
  favorito      favorito[]
}

model user {
  id         Int          @id @default(autoincrement())
  nome       String       @db.VarChar(45)
  email      String       @unique(map: "email_UNIQUE") @db.VarChar(60)
  senha      String       @db.VarChar(15)
  telefone   String?         @unique(map: "telefone_UNIQUE") @db.VarChar(11)
  cpf        String?      @db.VarChar(12)
  avatar     String?      @db.VarChar(255)
  carrinho   carrinho[]
  comentario comentario[]
  endereco   endereco[]
  favorito   favorito[]
}
